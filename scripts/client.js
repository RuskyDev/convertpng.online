document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("fileInput"),t=document.getElementById("formatSelect"),n=document.getElementById("convertButton"),s=document.getElementById("uploadStatus"),a=document.getElementById("chooseFileButton"),o=document.getElementById("closeStatus"),l=null,d="jpg";if(!e||!t||!n||!s||!a||!navToggle||!mobileMenu||!o){console.error("Required elements are missing.");return}function r(e){s.classList.remove("hidden"),"error"===e?(s.classList.add("bg-red-500","text-white"),s.classList.remove("bg-green-500"),s.querySelector("#uploadStatusMessage").textContent=`${l?`File "${l.name}" could not be processed.`:"No file selected."}`):"success"===e?(s.classList.add("bg-green-500","text-white"),s.classList.remove("bg-red-500"),s.querySelector("#uploadStatusMessage").textContent="Conversation successful. Download will start shortly. please wait."):(s.classList.add("bg-blue-500","text-white"),s.classList.remove("bg-red-500","bg-green-500"),s.querySelector("#uploadStatusMessage").textContent=`File "${l?l.name:"not selected"}" has been selected.`)}a.addEventListener("click",function(){e.click()}),e.addEventListener("change",function e(t){l=t.target.files[0],r("info")},!1),t.addEventListener("change",function(){d=t.value}),n.addEventListener("click",function(){if(l){let e=new FileReader;e.onload=function(e){let t=document.createElement("canvas"),n=t.getContext("2d"),s=new Image;s.onload=function(){t.width=s.width,t.height=s.height,n.drawImage(s,0,0);let e=t.toDataURL(`image/${d}`),a=document.createElement("a");a.href=e,a.download=`image.${d}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),r("success")},s.onerror=function(){r("error")},s.src=e.target.result},e.onerror=function(){r("error")},e.readAsDataURL(l)}}),o&&o.addEventListener("click",function(){s.classList.add("hidden")})});